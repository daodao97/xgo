var y={},_;function k(){if(_)return y;_=1,Object.defineProperty(y,"__esModule",{value:!0}),y.PathError=y.TokenData=void 0,y.parse=v,y.compile=A,y.match=b,y.pathToRegexp=D,y.stringify=M;const $="/",x=e=>e,E=/^[$_\p{ID_Start}]$/u,w=/^[$\u200c\u200d\p{ID_Continue}]$/u,P={"{":"{","}":"}","(":"(",")":")","[":"[","]":"]","+":"+","?":"?","!":"!"};function U(e){return e.replace(/[{}()\[\]+?!:*\\]/g,"\\$&")}function h(e){return e.replace(/[.+*?^${}()[\]|/\\]/g,"\\$&")}class T{constructor(r,o){this.tokens=r,this.originalPath=o}}y.TokenData=T;class g extends TypeError{constructor(r,o){let s=r;o&&(s+=`: ${o}`),s+="; visit https://git.new/pathToRegexpError for info",super(s),this.originalPath=o}}y.PathError=g;function v(e,r={}){const{encodePath:o=x}=r,s=[...e],n=[];let t=0,a=0;function u(){let i="";if(E.test(s[t]))do i+=s[t++];while(w.test(s[t]));else if(s[t]==='"'){let p=t;for(;t++<s.length;){if(s[t]==='"'){t++,p=0;break}s[t]==="\\"&&t++,i+=s[t]}if(p)throw new g(`Unterminated quote at index ${p}`,e)}if(!i)throw new g(`Missing parameter name at index ${t}`,e);return i}for(;t<s.length;){const i=s[t],p=P[i];p?n.push({type:p,index:t++,value:i}):i==="\\"?n.push({type:"escape",index:t++,value:s[t++]}):i===":"?n.push({type:"param",index:t++,value:u()}):i==="*"?n.push({type:"wildcard",index:t++,value:u()}):n.push({type:"char",index:t++,value:i})}n.push({type:"end",index:t,value:""});function f(i){const p=[];for(;;){const c=n[a++];if(c.type===i)break;if(c.type==="char"||c.type==="escape"){let l=c.value,d=n[a];for(;d.type==="char"||d.type==="escape";)l+=d.value,d=n[++a];p.push({type:"text",value:o(l)});continue}if(c.type==="param"||c.type==="wildcard"){p.push({type:c.type,name:c.value});continue}if(c.type==="{"){p.push({type:"group",tokens:f("}")});continue}throw new g(`Unexpected ${c.type} at index ${c.index}, expected ${i}`,e)}return p}return new T(f("end"),e)}function A(e,r={}){const{encode:o=encodeURIComponent,delimiter:s=$}=r,n=typeof e=="object"?e:v(e,r),t=S(n.tokens,s,o);return function(u={}){const[f,...i]=t(u);if(i.length)throw new TypeError(`Missing parameters: ${i.join(", ")}`);return f}}function S(e,r,o){const s=e.map(n=>N(n,r,o));return n=>{const t=[""];for(const a of s){const[u,...f]=a(n);t[0]+=u,t.push(...f)}return t}}function N(e,r,o){if(e.type==="text")return()=>[e.value];if(e.type==="group"){const n=S(e.tokens,r,o);return t=>{const[a,...u]=n(t);return u.length?[""]:[a]}}const s=o||x;return e.type==="wildcard"&&o!==!1?n=>{const t=n[e.name];if(t==null)return["",e.name];if(!Array.isArray(t)||t.length===0)throw new TypeError(`Expected "${e.name}" to be a non-empty array`);return[t.map((a,u)=>{if(typeof a!="string")throw new TypeError(`Expected "${e.name}/${u}" to be a string`);return s(a)}).join(r)]}:n=>{const t=n[e.name];if(t==null)return["",e.name];if(typeof t!="string")throw new TypeError(`Expected "${e.name}" to be a string`);return[s(t)]}}function b(e,r={}){const{decode:o=decodeURIComponent,delimiter:s=$}=r,{regexp:n,keys:t}=D(e,r),a=t.map(u=>o===!1?x:u.type==="param"?o:f=>f.split(s).map(o));return function(f){const i=n.exec(f);if(!i)return!1;const p=i[0],c=Object.create(null);for(let l=1;l<i.length;l++){if(i[l]===void 0)continue;const d=t[l-1],L=a[l-1];c[d.name]=L(i[l])}return{path:p,params:c}}}function D(e,r={}){const{delimiter:o=$,end:s=!0,sensitive:n=!1,trailing:t=!0}=r,a=[],u=n?"":"i",f=[];for(const c of I(e,[])){const l=typeof c=="object"?c:v(c,r);for(const d of m(l.tokens,0,[]))f.push(j(d,o,a,l.originalPath))}let i=`^(?:${f.join("|")})`;return t&&(i+=`(?:${h(o)}$)?`),i+=s?"$":`(?=${h(o)}|$)`,{regexp:new RegExp(i,u),keys:a}}function I(e,r){if(Array.isArray(e))for(const o of e)I(o,r);else r.push(e);return r}function*m(e,r,o){if(r===e.length)return yield o;const s=e[r];if(s.type==="group")for(const n of m(s.tokens,0,o.slice()))yield*m(e,r+1,n);else o.push(s);yield*m(e,r+1,o)}function j(e,r,o,s){let n="",t="",a=!0;for(const u of e){if(u.type==="text"){n+=h(u.value),t+=u.value,a||(a=u.value.includes(r));continue}if(u.type==="param"||u.type==="wildcard"){if(!a&&!t)throw new g(`Missing text before "${u.name}" ${u.type}`,s);u.type==="param"?n+=`(${O(r,a?"":t)}+)`:n+="([\\s\\S]+)",o.push(u),t="",a=!1;continue}}return n}function O(e,r){return r.length<2?e.length<2?`[^${h(e+r)}]`:`(?:(?!${h(e)})[^${h(r)}])`:e.length<2?`(?:(?!${h(r)})[^${h(e)}])`:`(?:(?!${h(r)}|${h(e)})[\\s\\S])`}function R(e){let r="",o=0;function s(n){return q(n)&&C(e[o])?n:JSON.stringify(n)}for(;o<e.length;){const n=e[o++];if(n.type==="text"){r+=U(n.value);continue}if(n.type==="group"){r+=`{${R(n.tokens)}}`;continue}if(n.type==="param"){r+=`:${s(n.name)}`;continue}if(n.type==="wildcard"){r+=`*${s(n.name)}`;continue}throw new TypeError(`Unknown token type: ${n.type}`)}return r}function M(e){return R(e.tokens)}function q(e){const[r,...o]=e;return E.test(r)&&o.every(s=>w.test(s))}function C(e){return e&&e.type==="text"?!w.test(e.value[0]):!0}return y}var F=k();export{F as d};
